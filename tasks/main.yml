---
- name: Install pip if needed
  apt:
    pkg: python-pip
    state: present
    update_cache: yes

- name: Install docker container dependencies
  pip:
    executable: /usr/bin/pip
    name: docker-py

- name: Run chronos container
  docker_container:
    name: consul
    image: consul
    state: started
    detach: True
    restart_policy: always
    network_mode: bridge
    published_ports:
     - 8500:8500
    hostname: "{{ ansible_hostname }}"
    command: "{{ consul_container_command }}"